# Copied from https://github.com/chrishunt/dot-files/blob/master/.tmux.conf and modified according to my needs

# use 256 term for pretty colors
set -g default-terminal "screen-256color"

# Enable the mouse
set -g mouse on

# increase scroll-back history
set -g history-limit 5000

# use vim key bindings
setw -g mode-keys vi

# start window index at 1
set -g base-index 1

# start pane index at 1
setw -g pane-base-index 1

# decrease command delay (increases vim responsiveness)
set -sg escape-time 1

# re-number windows when one is closed
set -g renumber-windows on

# Enable xterm keys
set-window-option -g xterm-keys on

set-option -g destroy-unattached off

###########################
#  Key Bindings
###########################

# tmux prefix
set -g prefix C-b
bind C-b send-prefix

# paste
unbind C-p
bind C-p paste-buffer

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

setw -g aggressive-resize on

bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Split windows like Vim.
bind v split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

bind '"' split-window -h -c "#{pane_current_path}"
bind  %  split-window -v -c "#{pane_current_path}"

bind c new-window -c "#{pane_current_path}"

#######################################################
# Making copying and pasting work
#######################################################

# Copy-paste integration
set-option -g default-command "$SHELL -l"

# Use vim keybindings in copy mode
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Update default binding of `Enter` to also use copy-pipe-and-cancel
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# Bind ']' to use pbpaste
bind ] run "pbpaste | tmux load-buffer - && tmux paste-buffer"

#######################################################
# Vim Tmux Navigation
#######################################################
#
is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
bind h if-shell "$is_vim" "send-keys C-a h" "select-pane -L"
bind j if-shell "$is_vim" "send-keys C-a j" "select-pane -D"
bind k if-shell "$is_vim" "send-keys C-a k" "select-pane -U"
bind l if-shell "$is_vim" "send-keys C-a l" "select-pane -R"

#######################################################
# Colors
#######################################################
# From https://github.com/connrs/dotfiles/blob/master/tmux/tomorrow-night.tmux

#set status bar
set -g status-bg "#373b41"
set -g status-fg "#c5c8c6"

## highlight active window
setw -g window-status-current-bg "#282a2e"
setw -g window-status-current-fg "#81a2be"

## highlight activity in status bar
setw -g window-status-activity-fg "#8abeb7"
setw -g window-status-activity-bg "#1d1f21"

## pane border and colors
set -g pane-active-border-bg default
set -g pane-active-border-fg "#373b41"
set -g pane-border-bg default
set -g pane-border-fg "#373b41"

set -g clock-mode-colour "#81a2be"
set -g clock-mode-style 24

set -g message-bg "#8abeb7"
set -g message-fg "#000000"

set -g message-command-bg "#8abeb7"
set -g message-command-fg "#000000"

set -g mode-bg "#8abeb7"
set -g mode-fg "#000000"
